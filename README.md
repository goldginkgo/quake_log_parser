#Quake log parser

## Introduction
This is a Ruby implementation of Quake log parser.

### Task 1

Create a parser for the log file games.log

This file is generated by the Quake 3 Arena server. It contains lots of information from the games:

1. When a game starts.
2. When it finishes.
3. Who killed whom.
4. How players got killed.
5. Who suicided

And more.

#### Example

`21:42 Kill: 1022 2 22: <world> killed Isgalamido by MOD_TRIGGER_HURT`

The player "Isgalamido" died because he had low health and took fall damage.

`2:22 Kill: 3 2 10: Isgalamido killed Dono da Bola by MOD_RAILGUN`

The player "Isgalamido" killed the player Dono da Bola using a Railgun.

For each game the parser should return something like this:

```
    game_1: {
	    total_kills: 45;
	    players: ["Dono da bola", "Isgalamido", "Zeh"]
	    kills: {
	      "Dono da bola": 5,
	      "Isgalamido": 18,
	      "Zeh": 20
	    }
	  }
```

#### Considerations
1. When a player suicides (killed by `<world>`) it loses 1 frag/kill.
2. `<world>` is not a player and shouldn't be returned on the players list.
3. `total_kills` are actual game frags.

### Task 2

After the parser you need to build a script to print the score for every game.

### Task 3 (optional)

Create a command line tool to generate a report showing an aggregation of kill reasons per game.

#### Kill reasons

Source: https://github.com/id-Software/Quake-III-Arena/blob/master/code/game/bg_public.h

```
	// means of death
	typedef enum {
		MOD_UNKNOWN,
		MOD_SHOTGUN,
		MOD_GAUNTLET,
		MOD_MACHINEGUN,
		MOD_GRENADE,
		MOD_GRENADE_SPLASH,
		MOD_ROCKET,
		MOD_ROCKET_SPLASH,
		MOD_PLASMA,
		MOD_PLASMA_SPLASH,
		MOD_RAILGUN,
		MOD_LIGHTNING,
		MOD_BFG,
		MOD_BFG_SPLASH,
		MOD_WATER,
		MOD_SLIME,
		MOD_LAVA,
		MOD_CRUSH,
		MOD_TELEFRAG,
		MOD_FALLING,
		MOD_SUICIDE,
		MOD_TARGET_LASER,
		MOD_TRIGGER_HURT,
	#ifdef MISSIONPACK
		MOD_NAIL,
		MOD_CHAINGUN,
		MOD_PROXIMITY_MINE,
		MOD_KAMIKAZE,
		MOD_JUICED,
	#endif
		MOD_GRAPPLE
	} meansOfDeath_t;
```

Sample return:

```
	"game-1": {
		kills_by_means: {
			"MOD_SHOTGUN": 10,
			"MOD_RAILGUN": 2,
			"MOD_GAUNTLET": 1,
			"XXXX": N
		}
	}
```

### My additional considerations
1. Two kinds of suicides (killed by `<world>` or self)
2. score = kills - suicides, and can be negative

## Run RSpec tests
```
cd quake_log_parser
bundle install
rspec --format doc
```

## Run the parser
Execute the following command line to run the parser.
```
Usage: ruby main.rb [options]

Specific options:
    -f, --file Name                  Specify the log file path.
    -k, --kill-reason                Display aggregation of kill reasons.
    -g, --game-name Name             Display information for a single game.

Common options:
    -h, --help                       Show this message.
```
For example, run the following command to show the scores for all games.
```
ruby main.rb -f <LOG_FILE_PATH>
```
Your can also omit the -f option to parse the default log file in quake_logs folder.
```
ruby main.rb
```
If you want to show scores for a specific game,
```
ruby main.rb -g game_1
```
If you want to show aggregation of kill reason for all games,
```
ruby main.rb -k
```
If you want to show aggregation of kill reason for a specific game,
```
ruby main.rb -k -g game_1
```
